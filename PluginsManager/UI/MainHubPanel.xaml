<Window x:Class="PluginsManager.UI.MainHubPanel"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Name="MainWindow"
        Title="ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð¿Ð»Ð°Ð³Ð¸Ð½Ð¾Ð² AnnotatiX.AI"
        Width="767"
        Height="584"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        Background="White"
        FontFamily="Segoe UI"
        BorderBrush="#7A7A7A"
        BorderThickness="1">
    
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="SharedStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            
            <!-- Plugin Card Style -->
            <Style x:Key="PluginCard" TargetType="Border">
                <Setter Property="Background" Value="White"/>
                <Setter Property="BorderBrush" Value="#D0D0D0"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="CornerRadius" Value="2"/>
                <Setter Property="Padding" Value="16"/>
                <Setter Property="Margin" Value="0,0,12,12"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Height" Value="130"/>
                <Setter Property="Width" Value="120"/>
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter Property="Background" Value="#E5F3FF"/>
                        <Setter Property="BorderBrush" Value="#0078D4"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
            
            <Style x:Key="PluginCardDisabled" TargetType="Border" BasedOn="{StaticResource PluginCard}">
                <Setter Property="Opacity" Value="0.5"/>
                <Setter Property="Cursor" Value="Arrow"/>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Title Bar (hidden by default, visible only when showing module panels) -->
        <Border x:Name="TitleBar"
                Grid.Row="0" 
                Background="White" 
                BorderBrush="#D0D0D0" 
                BorderThickness="0,0,0,1"
                Padding="16,8"
                Visibility="Collapsed">
            <Grid>
                <StackPanel Orientation="Horizontal">
                    <Button x:Name="btnBack"
                            Content="â† ÐÐ°Ð·Ð°Ð´"
                            Style="{StaticResource BackButton}"
                            Click="BtnBack_Click"
                            Margin="0,0,16,0"/>
                    <TextBlock x:Name="txtModuleTitle"
                               Text="" 
                               Style="{StaticResource WindowTitle}"/>
                </StackPanel>
                <Button Content="âœ•"
                        Style="{StaticResource CloseButton}"
                        HorizontalAlignment="Right"
                        Click="Window_Close"/>
            </Grid>
        </Border>
        
        <!-- Main Content -->
        <Grid x:Name="MainContentGrid" Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition x:Name="SidebarColumn" Width="280"/>
            </Grid.ColumnDefinitions>
            
            <!-- Left: Plugin Grid -->
            <Grid x:Name="ContentArea" Grid.Column="0" Background="#F5F5F5">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="20">
                    <StackPanel>
                        <ContentControl x:Name="MainContent">
                            <StackPanel>
                                <TextBlock Text="Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð¿Ð»Ð°Ð³Ð¸Ð½Ñ‹" 
                                           FontSize="18"
                                           FontWeight="SemiBold"
                                           Foreground="Black"
                                           Margin="0,0,0,16"/>
                                
                                <!-- Plugin Grid 3x3 -->
                                <WrapPanel>
                                    <!-- DWG2RVT Plugin -->
                                    <Border x:Name="pnlDwg2rvt"
                                            Style="{StaticResource PluginCardDisabled}"
                                            MouseLeftButtonUp="Dwg2rvt_Click">
                                        <StackPanel>
                                            <Image x:Name="imgDwg2rvtIcon"
                                                   Width="64"
                                                   Height="64"
                                                   Margin="0,0,0,8"
                                                   Stretch="Uniform"/>
                                            <TextBlock Text="DWG2RVT"
                                                       FontSize="12"
                                                       FontWeight="SemiBold"
                                                       TextAlignment="Center"
                                                       TextWrapping="Wrap"
                                                       Foreground="#333333"/>
                                        </StackPanel>
                                    </Border>
                                    
                                    <!-- HVAC Plugin -->
                                    <Border x:Name="pnlHvac"
                                            Style="{StaticResource PluginCardDisabled}"
                                            MouseLeftButtonUp="Hvac_Click">
                                        <StackPanel>
                                            <Image x:Name="imgHvacIcon"
                                                   Width="64"
                                                   Height="64"
                                                   Margin="0,0,0,8"
                                                   Stretch="Uniform"/>
                                            <TextBlock Text="HVAC"
                                                       FontSize="12"
                                                       FontWeight="SemiBold"
                                                       TextAlignment="Center"
                                                       TextWrapping="Wrap"
                                                       Foreground="#333333"/>
                                        </StackPanel>
                                    </Border>
                                    
                                    <!-- FamilySync Plugin -->
                                    <Border x:Name="pnlFamilySync"
                                            Style="{StaticResource PluginCardDisabled}"
                                            MouseLeftButtonUp="FamilySync_Click">
                                        <StackPanel>
                                            <Image x:Name="imgFamilySyncIcon"
                                                   Width="64"
                                                   Height="64"
                                                   Margin="0,0,0,8"
                                                   Stretch="Uniform"/>
                                            <TextBlock Text="Family Sync"
                                                       FontSize="12"
                                                       FontWeight="SemiBold"
                                                       TextAlignment="Center"
                                                       TextWrapping="Wrap"
                                                       Foreground="#333333"/>
                                        </StackPanel>
                                    </Border>
                                    
                                    <!-- Placeholder 1-6 -->
                                    <Border Style="{StaticResource PluginCardDisabled}"/>
                                    <Border Style="{StaticResource PluginCardDisabled}"/>
                                    <Border Style="{StaticResource PluginCardDisabled}"/>
                                    <Border Style="{StaticResource PluginCardDisabled}"/>
                                    <Border Style="{StaticResource PluginCardDisabled}"/>
                                    <Border Style="{StaticResource PluginCardDisabled}"/>
                                </WrapPanel>
                            </StackPanel>
                        </ContentControl>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
            
            <!-- Right Sidebar -->
            <Grid x:Name="RightSidebar" Grid.Column="1" Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Account Section -->
                <Border Grid.Row="0"
                        BorderBrush="#D0D0D0"
                        BorderThickness="1,0,0,1"
                        Padding="16">
                    <StackPanel>
                        <TextBlock Text="Ð£Ñ‡Ñ‘Ñ‚Ð½Ð°Ñ Ð·Ð°Ð¿Ð¸ÑÑŒ" 
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="Black"
                                   Margin="0,0,0,12"/>
                        
                        <!-- Auth Status Container -->
                        <StackPanel x:Name="pnlAuthStatus">
                            <!-- Warning Message (shown when not authenticated) -->
                            <Border x:Name="warningMessage"
                                    Style="{StaticResource WarningMessage}"
                                    Margin="0,0,0,8">
                                <TextBlock Text="âš  Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ"
                                           FontSize="12"
                                           Foreground="#856404"/>
                            </Border>
                            
                            <!-- Success Message (shown when authenticated) -->
                            <Border x:Name="successMessage"
                                    Style="{StaticResource SuccessMessage}"
                                    Margin="0,0,0,8"
                                    Visibility="Collapsed">
                                <TextBlock Text="âœ“ Ð’Ñ‹ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð¾Ð²Ð°Ð½Ñ‹"
                                           FontSize="12"
                                           Foreground="#2D662D"/>
                            </Border>
                            
                            <!-- License Info (shown when authenticated) -->
                            <StackPanel x:Name="pnlLicenseInfo"
                                        Visibility="Collapsed"
                                        Margin="0,0,0,8">
                                <TextBlock FontSize="12" Foreground="#666666">
                                    <Run Text="Ð›Ð¸Ñ†ÐµÐ½Ð·Ð¸Ñ: "/>
                                    <Run x:Name="txtPlan" Text="Pro Plan" FontWeight="SemiBold"/>
                                </TextBlock>
                                <TextBlock FontSize="12" Foreground="#666666" Margin="0,4,0,0">
                                    <Run Text="Ð”Ð¾: "/>
                                    <Run x:Name="txtExpiry" Text="15.03.2026" FontWeight="SemiBold"/>
                                </TextBlock>
                            </StackPanel>
                            
                            <!-- Auth Button -->
                            <Button x:Name="btnAuth"
                                    Content="Ð’Ð¾Ð¹Ñ‚Ð¸"
                                    Style="{StaticResource PrimaryButton}"
                                    Click="BtnAuth_Click"
                                    Margin="0,8,0,0"/>
                            
                            <!-- Refresh Button (hidden by default) -->
                            <Button x:Name="btnRefreshUserData"
                                    Content="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ"
                                    Style="{StaticResource SecondaryButton}"
                                    Visibility="Collapsed"
                                    Click="BtnRefreshUserData_Click"
                                    Margin="0,8,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- News Section -->
                <ScrollViewer Grid.Row="1"
                              VerticalScrollBarVisibility="Auto"
                              BorderBrush="#D0D0D0"
                              BorderThickness="1,0,0,1">
                    <StackPanel Margin="16">
                        <TextBlock Text="ÐÐ¾Ð²Ð¾ÑÑ‚Ð¸" 
                                   FontSize="14"
                                   FontWeight="SemiBold"
                                   Foreground="Black"
                                   Margin="0,0,0,12"/>
                        
                        <!-- News Item 1 -->
                        <Border Background="#F9F9F9"
                                BorderBrush="#E0E0E0"
                                BorderThickness="1"
                                CornerRadius="2"
                                Padding="12"
                                Margin="0,0,0,12">
                            <StackPanel>
                                <TextBlock Text="12.02.2026"
                                           FontSize="10"
                                           Foreground="#999999"
                                           Margin="0,0,0,4"/>
                                <TextBlock Text="ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ v2.0"
                                           FontSize="12"
                                           FontWeight="SemiBold"
                                           Foreground="#333333"
                                           Margin="0,0,0,4"/>
                                <TextBlock Text="Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ° Revit 2025. Ð£Ð»ÑƒÑ‡ÑˆÐµÐ½Ð° Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ Ð¼Ð¾Ð´ÑƒÐ»Ñ HVAC."
                                           FontSize="11"
                                           Foreground="#666666"
                                           TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- News Item 2 -->
                        <Border Background="#F9F9F9"
                                BorderBrush="#E0E0E0"
                                BorderThickness="1"
                                CornerRadius="2"
                                Padding="12">
                            <StackPanel>
                                <TextBlock Text="05.02.2026"
                                           FontSize="10"
                                           Foreground="#999999"
                                           Margin="0,0,0,4"/>
                                <TextBlock Text="ÐÐ¾Ð²Ñ‹Ð¹ Ð¿Ð»Ð°Ð³Ð¸Ð½"
                                           FontSize="12"
                                           FontWeight="SemiBold"
                                           Foreground="#333333"
                                           Margin="0,0,0,4"/>
                                <TextBlock Text="Ð¡ÐºÐ¾Ñ€Ð¾ Ð²Ñ‹Ð¹Ð´ÐµÑ‚ Ð¼Ð¾Ð´ÑƒÐ»ÑŒ Electra Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ ÑÐ»ÐµÐºÑ‚Ñ€Ð¾ÑÑ…ÐµÐ¼Ð°Ð¼Ð¸."
                                           FontSize="11"
                                           Foreground="#666666"
                                           TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
                
                <!-- Debug Section -->
                <Border Grid.Row="2"
                        Background="#F5F5F5"
                        Padding="16"
                        BorderBrush="#D0D0D0"
                        BorderThickness="1,0,0,0">
                    <StackPanel>
                    <Button Content="ðŸ“‹ Debug Log"
                            Style="{StaticResource SecondaryButton}"
                            Margin="0,0,0,8"
                            Click="BtnDebugLog_Click"/>
                    <Button Content="ðŸ“¦ Ð˜Ð½Ñ„Ð¾ Ð¾ Ð¼Ð¾Ð´ÑƒÐ»ÑÑ…"
                            Style="{StaticResource SecondaryButton}"
                            Click="BtnModulesInfo_Click"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
        
        <!-- Status Bar -->
        <Border Grid.Row="2"
                Background="#F0F0F0"
                BorderBrush="#D0D0D0"
                BorderThickness="0,1,0,0"
                Padding="16,8">
            <Grid>
                <TextBlock x:Name="txtStatusLeft"
                           Text="Ð“Ð¾Ñ‚Ð¾Ð² Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ"
                           FontSize="12"
                           Foreground="#666666"
                           HorizontalAlignment="Left"/>
                <TextBlock x:Name="txtStatusRight"
                           Text="Revit 2024 | Build 23.1.12"
                           FontSize="12"
                           Foreground="#666666"
                           HorizontalAlignment="Right"/>
            </Grid>
        </Border>
    </Grid>
</Window>
